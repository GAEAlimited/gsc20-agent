<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
<script

  src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.3/socket.io.js"
  integrity="sha512-2RDFHqfLZW8IhPRvQYmK9bTLfj/hddxGXQAred2wNZGkrKQkLGj8RCkXfRJPHlDerdHHIzTFaahq4s/P4V6Qig=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
></script>
<script>
	fetch('/getToken')
		.then(data => data.text())
		.then((token) => {
			const socket = io("/", {
				transports: ['websocket'],
        query: {
				 	token
				}
			});
			console.log(token, socket);
			window.socket = socket;
		})
</script>
</body>
</html>